(()=>{"use strict";var e={5338(e,t,a){var n=a(5795);t.createRoot=n.createRoot,n.hydrateRoot},5795(e){e.exports=window.ReactDOM}},t={};function a(n){var l=t[n];if(void 0!==l)return l.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,a),r.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const n=window.React;var l=a.n(n),r=a(5338);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t,a){return(t=function(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=o(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c.apply(null,arguments)}const s=window.wp.components,u=e=>{let{name:t,value:a,label:l,options:r,placeholder:o,onMultiSelectChangeHandler:i,isDisable:c,isAjax:u,ajaxAction:d,ajaxSearch:p,dependsValue:_}=e;const m=(0,n.useRef)(null),f=Boolean(u&&d),h=Array.isArray(a)?a:[],y=Array.isArray(r)?r:[],v=e=>{const t=document.createElement("textarea");return t.innerHTML=null!=e?e:"",t.value},[g,w]=(0,n.useState)(h),[x,b]=(0,n.useState)(y);(0,n.useEffect)(()=>{w(Array.isArray(a)?a:[])},[a]),(0,n.useEffect)(()=>{b(Array.isArray(r)?r:[])},[r]);const[E,O]=(0,n.useState)(h),[j,R]=(0,n.useState)([]),[S,k]=(0,n.useState)(""),[C,P]=(0,n.useState)(!1),[B,N]=(0,n.useState)(""),[D,V]=(0,n.useState)(y);(0,n.useEffect)(()=>{O(Array.isArray(a)?a:[])},[a]),(0,n.useEffect)(()=>{V(Array.isArray(r)?r:[])},[r]);const H=()=>{let e=[];E.length>0&&(e=E.map(e=>e.value));const t=D.filter(t=>{const{name:a,value:n}=t;return(a||"").toLowerCase().includes(S.toLowerCase())&&-1===e.indexOf(n)});R(t)};(0,n.useEffect)(()=>{if(!f)return;m.current=new AbortController;const{signal:e}=m.current;p||(async e=>{P(!0);const t={type:"get",action:"dynamic_rule_action",nonce:wholesalex.nonce,ajax_action:d};_&&(t.depends=_);try{const n=await wp.apiFetch({path:"/wholesalex/v1/dynamic_rule_action",method:"POST",data:t,signal:e});if(n.status){var a;let e=[];E.length>0&&(e=E.map(e=>e.value));const t=null==n||null===(a=n.data)||void 0===a?void 0:a.filter(t=>{const{value:a}=t;return-1===e.indexOf(a)});t.sort((e,t)=>e.name.length-t.name.length),V(n.data),R(t)}}catch(e){}finally{P(!1)}})(e)},[]),(0,n.useEffect)(()=>{if(f&&p){m.current=new AbortController;const{signal:e}=m.current;return S.length>=2&&(async e=>{P(!0);const t={type:"get",action:"dynamic_rule_action",nonce:wholesalex.nonce,query:S,ajax_action:d};try{const n=await wp.apiFetch({path:"/wholesalex/v1/dynamic_rule_action",method:"POST",data:t,signal:e});if(n.status){var a;let e=[];E.length>0&&(e=E.map(e=>e.value));const t=null==n||null===(a=n.data)||void 0===a?void 0:a.filter(t=>{const{value:a}=t;return-1===e.indexOf(a)});t.sort((e,t)=>e.name.length-t.name.length),V(e=>{const t=new Set(e.map(e=>e.value)),a=n.data.filter(e=>!t.has(e.value));return[...e,...a]}),R(t)}}catch(e){}finally{P(!1)}})(e),()=>{m.current&&m.current.abort("Duplicate")}}},[S]),(0,n.useEffect)(()=>{if(f)if(p){if(B.length>1){const e=setTimeout(()=>k(B),500);return()=>clearTimeout(e)}}else k(B),H()},[B]),(0,n.useEffect)(()=>{f&&!p&&H()},[D]);const M=f,F=M?E:g,A=M?j:x,T=M?o||t:l||o||t;let L=o;return!M&&g.length>0&&(L=""),React.createElement(s.FormTokenField,{__nextHasNoMarginBottom:!0,__experimentalAutoSelectFirstMatch:!0,__experimentalExpandOnFocus:!0,__next40pxDefaultSize:!0,__experimentalShowHowTo:!1,disabled:Boolean(c),id:M?void 0:t,value:F.map(e=>v(null==e?void 0:e.name)),suggestions:A.map(e=>v(null==e?void 0:e.name)),placeholder:L,label:null!=l?l:"","aria-label":T,isLoading:M?C:void 0,onChange:M?e=>{const a=(Array.isArray(e)?e:[]).map(e=>{const t=(e=>{const t=(null!=e?e:"").toString().toLowerCase();return D.find(e=>v((null==e?void 0:e.name)||(null==e?void 0:e.userName)||"").toString().toLowerCase()===t)||j.find(e=>v((null==e?void 0:e.name)||(null==e?void 0:e.userName)||"").toString().toLowerCase()===t)})(e);if(t)return t;return E.find(t=>(null==t?void 0:t.value)&&t.value.toString()===e.toString())||{name:e,value:e,permalink:""}});O(a),null==i||i(t,a);const n=a.map(e=>e.value),l=(D.length>0?D:j).filter(e=>-1===n.indexOf(e.value));R(l)}:e=>{const a=(e||[]).map(e=>y.find(t=>{var a;return v(null!==(a=null==t?void 0:t.name)&&void 0!==a?a:"")===e||(null==t?void 0:t.name)===e})||{name:e,value:e});w(a),null==i||i(t,a)},onInputChange:M?e=>{N(e)}:void 0,className:"wsx-multiselect-component"})},d=window.wp.i18n,p=window.wp.primitives,_=window.ReactJSXRuntime;var m=(0,_.jsx)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,_.jsx)(p.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})}),f=(0,_.jsx)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,_.jsx)(p.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})});const h=window.wp.compose;function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach(function(t){i(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}const g=e=>{var t;let{fields:a,tier:l,setTier:r,tierName:o,index:i,setPopupStatus:p,src:_,isProfile:y=!1,isSmallGap:g=!1,style:w}=e;const x=Object.keys(a).length,b=null===(t=wholesalex)||void 0===t?void 0:t.is_rtl_support,E=(0,h.useViewportMatch)("medium","<"),O=(e,t,a)=>{const n=l[o]&&l[o].tiers&&l[o].tiers[i]&&l[o].tiers[i][a]?l[o].tiers[i][a]:t.default;return React.createElement(s.BaseControl,{__nextHasNoMarginBottom:!0,key:e},(E||0===i)&&t.label&&React.createElement(s.BaseControl.VisualLabel,null,t.label),React.createElement(s.SelectControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,name:"".concat(a,"_").concat(i),value:n,onChange:e=>{if(null!=e&&e.startsWith("pro_")&&p)p(!0);else{const t=l[o]?v({},l[o]):{tiers:[]},n=t.tiers?[...t.tiers]:[],c=n[i]?v({},n[i]):{};c[a]=e,n[i]=c,t.tiers=n,r(v(v({},l),{},{[o]:t}))}},options:(c=t.options,Object.keys(c).map(e=>({value:e,label:c[e]})))}));var c},j=e=>{if(!e)return!0;const t=l[o]&&l[o].tiers&&l[o].tiers[i]?l[o].tiers[i]:{};let a=!0;return e.forEach(e=>{t[e.key]!==e.value&&(a=!1)}),a},R=(e,t,a)=>{const n=l[o]&&l[o].tiers&&l[o].tiers[i]&&l[o].tiers[i][a]?l[o].tiers[i][a]:t.default;return React.createElement(u,{key:e,name:a,value:n,options:t.options,placeholder:t.placeholder,label:E||0===i?t.label:"",onMultiSelectChangeHandler:(e,t)=>{const a=l[o]?v({},l[o]):{tiers:[]},n=a.tiers?[...a.tiers]:[],c=n[i]?v({},n[i]):{};c[e]=[...t],n[i]=c,a.tiers=n,r(v(v({},l),{},{[o]:a}))},isAjax:null==t?void 0:t.is_ajax,ajaxAction:null==t?void 0:t.ajax_action,ajaxSearch:null==t?void 0:t.ajax_search})},S=E?"1fr":y?"1.5fr repeat(2, minmax(144px, 0.8fr)) 2.5fr 40px":"repeat(".concat(x,", 1fr) 40px");return React.createElement(n.Fragment,{key:"wsx-tier-fields-".concat(o,"-").concat(i)},React.createElement(s.__experimentalGrid,{align:"end",style:v({},w),gap:g?3:6,templateColumns:S},Object.keys(a).map((e,t)=>{switch(a[e].type){case"text":case"number":return((e,t,a)=>{const n=l[o]&&l[o].tiers&&l[o].tiers[i]&&l[o].tiers[i][a]?l[o].tiers[i][a]:t.default,u={__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,id:"".concat(a,"_").concat(i),value:null!=n?n:"",placeholder:t.placeholder,onChange:e=>{let n="number"===t.type?(e=>{const t="".concat(null!=e?e:"").replace(/[^\d.]/g,"");if(""===t)return"";const[a,...n]=t.split("."),l=""===a?"0":a,r=n.length>0?"".concat(l,".").concat(n.join("")):l;return""===r?"":Number(r)})(e):e;"number"===t.type&&""!==n&&n<0&&(n=1);const c=l[o]?v({},l[o]):{tiers:[]},s=c.tiers?[...c.tiers]:[],u=s[i]?v({},s[i]):{};u[a]=n,s[i]=u,c.tiers=s,r(v(v({},l),{},{[o]:c}))}},d="number"===t.type?s.__experimentalNumberControl:s.TextControl;return React.createElement(s.BaseControl,{__nextHasNoMarginBottom:!0,key:e},(E||0===i)&&t.label&&React.createElement(s.BaseControl.VisualLabel,null,t.label),React.createElement(d,c({},u,"number"===t.type&&{spinControls:"custom",min:"0"})))})("tier_field_".concat(t),a[e],e);case"select":return O("tier_field_".concat(t),a[e],e);case"multiselect":return j(a[e].depends_on)&&R("tier_field_".concat(t),a[e],e);case"filter":return React.createElement(s.Flex,{align:"end",key:"tier_field_".concat(t)},a[e]&&Object.keys(a[e]).map((t,n)=>{var r,c,u,d;const p=a[e][t],_="tier_field_".concat(n),m=null!==(r=null===(c=l[o])||void 0===c||null===(c=c.tiers)||void 0===c||null===(c=c[i])||void 0===c?void 0:c[t])&&void 0!==r?r:p.default,f=null==m||null===(u=m.endsWith)||void 0===u?void 0:u.call(m,"_in_list"),h={select:()=>O(_,p,t),multiselect:()=>j(p.depends_on)?R(_,p,t):null},y=null===(d=h[p.type])||void 0===d?void 0:d.call(h);return y?React.createElement(s.FlexItem,{key:_,isBlock:"select"!==p.type||!f},y):null}).filter(Boolean));default:return null}}),React.createElement(s.__experimentalView,{style:{marginRight:b?"auto":void 0,marginLeft:b?void 0:"auto",padding:2}},React.createElement(s.Button,{key:"wsx-tier-field-delete-".concat(o,"_").concat(i),__next40pxDefaultSize:!0,onClick:()=>{const e=v({},l);let t=[...e[o].tiers];if(1===t.length)return e[o].tiers[0]._conditions_for="",e[o].tiers[0]._conditions_operator="",e[o].tiers[0]._conditions_value="",e[o].tiers[0]._discount_type="",e[o].tiers[0]._min_quantity="",e[o].tiers[0]._discount_name="",e[o].tiers[0]._discount_amount="",e[o].tiers[0]._product_filter="",e[o].tiers=t,void r(e);t=t.filter((e,t)=>i!==t),e[o].tiers=t,r(e)},icon:m,variant:"secondary",label:(0,d.__)("Delete","wholesalex"),isDestructive:!0}))),i===(l&&l[o]&&l[o].tiers&&0!==l[o].tiers.length?l[o].tiers.length-1:0)&&("quantity_based"===o||"conditions"===o)&&React.createElement(s.__experimentalView,{style:{padding:2,marginTop:"12px"}},React.createElement(s.Button,{icon:f,variant:"primary",onClick:()=>{const e=v({},l);e[o]||(e[o]={tiers:[]});const t=[...e[o].tiers];t.push({_id:Date.now().toString(),src:_||"dynamic_rule"}),e[o].tiers=t,r(e)}},(0,d.__)("Add New Condition","wholesalex"))))};var w=(0,_.jsx)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,_.jsx)(p.Path,{d:"M3.445 16.505a.75.75 0 001.06.05l5.005-4.55 4.024 3.521 4.716-4.715V14h1.5V8.25H14v1.5h3.19l-3.724 3.723L9.49 9.995l-5.995 5.45a.75.75 0 00-.05 1.06z"})});const x=e=>{let{UpgradeUrl:t="",addonCount:a="",title:n=(0,d.__)("Unlock","wholesalex"),onClose:l}=e;var r;return""===t&&(t=null===(r=wholesalex)||void 0===r?void 0:r.pro_link),React.createElement(s.Modal,{className:"wsx-upgrade-modal",onRequestClose:l},React.createElement(s.__experimentalVStack,{align:"center",spacing:5},React.createElement("img",{style:{maxWidth:"166px",maxHeight:"166px"},src:wholesalex.url+"/assets/img/unlock.svg",alt:"Unlock Icon"}),React.createElement(s.__experimentalVStack,{align:"center",spacing:1},React.createElement(s.__experimentalHStack,{justify:"center"},React.createElement(s.__experimentalText,{size:"18",weight:"500"},n),a&&React.createElement(s.__experimentalText,{size:"18",weight:"500"},a,"+"," ",(0,d.__)("Addons with","wholesalex"))),React.createElement(s.__experimentalHStack,{justify:"center"},React.createElement(s.__experimentalText,{size:"18",weight:"500"},(0,d.__)("WholesaleX","wholesalex")),React.createElement(s.__experimentalText,{size:"18",weight:"600",color:"#0C54FC"},(0,d.__)("Pro","wholesalex")))),React.createElement(s.Button,{href:"https://getwholesalex.com/pricing/?utm_source=wholesalex-menu&utm_medium=email-unlock_addon-upgrade_to_pro&utm_campaign=wholesalex-DB",variant:"primary",icon:w,style:{width:"100%",justifyContent:"center"}},(0,d.__)("Upgrade to Pro","wholesalex"))))};var b=(0,_.jsx)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,_.jsx)(p.Path,{d:"m14.5 6.5-1 1 3.7 3.7H4v1.6h13.2l-3.7 3.7 1 1 5.6-5.5z"})});function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}const O=e=>{var t,a;let{fieldData:n,tierName:l,lockStatus:r,initialTier:o,tier:c,setTier:u,setPopUpStatus:d,onAddTier:p}=e;const _=r&&"button"===(null==n||null===(t=n._tiers)||void 0===t||null===(t=t.upgrade_pro)||void 0===t?void 0:t.type),m=!r&&"button"===(null==n||null===(a=n._tiers)||void 0===a||null===(a=a.add)||void 0===a?void 0:a.type);if(!_&&!m)return null;const h=_?n._tiers.upgrade_pro:n._tiers.add;return React.createElement(s.Flex,{justify:"start",style:{marginTop:"12px"}},React.createElement(s.Button,{variant:"secondary",icon:_?b:f,iconPosition:_?"right":"left",onClick:e=>{if(e.preventDefault(),_)null==d||d(!0);else if("function"!=typeof p){if(c&&u){const e=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach(function(t){i(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},c);e[l]||(e[l]={tiers:[]}),e[l].tiers=[...e[l].tiers||[],o||{_id:Date.now().toString()}],u(e)}}else p(l)}},null==h?void 0:h.label))};function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(Object(a),!0).forEach(function(t){i(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}const S=e=>{var t,a,l,r;let{id:o,isWCFMVariation:i,type:c="simple"}=e;const u={_id:Date.now().toString(),_discount_type:"",_discount_amount:"",_min_quantity:"",src:"single_product"},[d,p]=(0,n.useState)({}),[_,m]=(0,n.useState)({loading:!0,currentWindow:"new",ruleWindow:"new",ruleIndex:-1,index:-1,loadingOnSave:!1}),[f,h]=(0,n.useState)({}),y=null===(t=wholesalex)||void 0===t?void 0:t.is_pro_active,[v,w]=(0,n.useState)(!1),b=(()=>{let e="";var t,a,n;return o||(e=wholesalex_single_product.is_dokan_dashboard?null===(t=document.getElementById("dokan-edit-product-id"))||void 0===t?void 0:t.value:(null===(a=document.getElementById("post_ID"))||void 0===a?void 0:a.value)||(null===(n=document.getElementById("pro_id"))||void 0===n?void 0:n.value)),o||e})();(0,n.useEffect)(()=>{wholesalex_single_product.fields&&h(wholesalex_single_product.fields);const e=Object.keys(wholesalex_single_product.fields),t={};e.map(e=>(Object.keys(wholesalex_single_product.fields[e].attr).map(e=>(t[e]={tiers:[R({},u)]},null)),null));const a=R(R({},t),wholesalex_single_product.discounts[b]);p(a),m(R(R({},_),{},{loading:!1}))},[]);const E=(e,t)=>{const a=R({},d),n=a[t]?a[t]:{};n.tiers&&0!==n.tiers.length||(n.tiers=[R({},u)],a[t]=n,p(a));let l=99999999999;var r;e.is_pro&&(l=null===(r=e.pro_data)||void 0===r?void 0:r.value),l||(l=99999999999);const o=d[t].tiers.length>=l&&!y;return React.createElement(s.Panel,{key:"wholesalex_".concat(t),className:"wsx-custom-panel"},React.createElement(s.PanelBody,{title:e.label,initialOpen:!1},React.createElement(s.__experimentalVStack,{spacing:8},e.attr&&Object.keys(e.attr).map(a=>{switch(e.attr[a].type){case"tier":return((e,t,a)=>{const n=e._tiers.data;return React.createElement(s.__experimentalVStack,{key:t,spacing:4},d&&d[t]&&d[t].tiers.map((e,a)=>React.createElement(g,{key:"wholesalex_".concat(t,"_tier_").concat(a),fields:n,tier:d,setTier:p,index:a,tierName:t})),React.createElement(O,{fieldData:e,tierName:t,lockStatus:a,initialTier:u,tier:d,setTier:p,setPopUpStatus:w}))})(e.attr[a],t,o);case"prices":return((e,t)=>React.createElement(s.Flex,{gap:6,direction:["column","row"],key:"wholesalex_".concat(t,"_separate")},Object.keys(e.attr).map(a=>"number"===e.attr[a].type&&((e,t,a)=>{const n=d[a]&&d[a][t]?d[a][t]:e.default;let l="";return parseFloat(d[a].wholesalex_sale_price)>parseFloat(d[a].wholesalex_base_price)?l=__("Sale price must be less than base price","wholesalex"):d[a].wholesalex_sale_price&&!d[a].wholesalex_base_price&&(l=__("Base price is required","wholesalex")),React.createElement(s.FlexItem,{isBlock:!0,key:"wholesalex_".concat(a,"_").concat(t)},React.createElement(s.BaseControl,{__nextHasNoMarginBottom:!0},React.createElement(s.BaseControl.VisualLabel,null,e.label),React.createElement(s.__experimentalNumberControl,{__next40pxDefaultSize:!0,onChange:e=>{const n=R({},d),l=n[a];l[t]=e,n[a]=l,p(R(R({},d),n))},value:null!=n?n:"",spinControls:"custom",placeholder:e.placeholder,id:"".concat(t),help:"Base Price"===e.label&&l?l:void 0})))})(e.attr[a],a,t))))(e.attr[a],t);default:return null}}))))};return React.createElement(React.Fragment,null,_.loading?React.createElement(s.Flex,{justify:"center"},React.createElement(s.Spinner,null)):React.createElement(s.Card,{size:"xSmall",style:{margin:24}},React.createElement(s.CardBody,null,React.createElement(s.__experimentalVStack,{spacing:5},Object.keys(f).map((e,t)=>Object.keys(f[e].attr).length>0&&React.createElement(s.__experimentalVStack,{spacing:3,key:"wholesalex_product_key_".concat(e,"_").concat(t)},f[e].label&&React.createElement(s.__experimentalHeading,{key:"wholesalex_b2c_b2b_sep_2",level:3},f[e].label),Object.keys(f[e].attr).map(t=>"tiers"===f[e].attr[t].type?E(f[e].attr[t],t):null)))))),(null===(a=wholesalex_single_product)||void 0===a?void 0:a.is_wcfm_dashboard)&&i&&React.createElement("input",{type:"hidden",id:"wholesalex_wcfm_product_variation_tiers_".concat(o||b),value:JSON.stringify(d),name:"wholesalex_wcfm_product_variation_tiers_".concat(o||b)}),(null===(l=wholesalex_single_product)||void 0===l?void 0:l.is_wcfm_dashboard)&&!i&&React.createElement("input",{type:"hidden",id:"wholesalex_wcfm_simple_product_tiers_".concat(o||b),value:JSON.stringify(d),name:"wholesalex_wcfm_simple_product_tiers_".concat(o||b)}),!(null!==(r=wholesalex_single_product)&&void 0!==r&&r.is_wcfm_dashboard)&&React.createElement("input",{type:"hidden",id:"wholesalex_single_product_tiers_".concat(o||b,"_").concat(c),value:JSON.stringify(d),name:"wholesalex_single_product_tiers_".concat(o||b,"_").concat(c)}),v&&React.createElement(x,{title:__("Unlock all of these Features with","wholesalex"),onClose:()=>w(!1)}))};function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach(function(t){i(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}const P=()=>{const e=(0,h.useViewportMatch)("small","<"),[t,a]=(0,n.useState)({}),[l,r]=(0,n.useState)({}),[o,i]=(0,n.useState)({}),[c,d]=(0,n.useState)(!1);(0,n.useEffect)(()=>{wholesalex_product_tab.fields&&r(wholesalex_product_tab.fields),wholesalex_product_tab.settings&&a(wholesalex_product_tab.settings),i(C(C({},o),{},{loading:!1}))},[]);const p=(e,n)=>{const l=t[n]||e.default||"",r=l.endsWith("_specific");return React.createElement(s.FlexItem,{isBlock:!r,key:n},React.createElement(s.BaseControl,{key:n,__nextHasNoMarginBottom:!0},React.createElement(s.BaseControl.VisualLabel,null,e.label),React.createElement(s.SelectControl,{hideLabelFromVision:!0,options:(o=e.options,Object.keys(o).map(e=>({value:e,label:o[e]}))),value:l,onChange:e=>{a(C(C({},t),{},{[n]:e}))},help:e.help,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0})));var o},_=(e,a)=>void 0===t[e]?a.default:t[e],m=(e,n,l)=>{let r;return r=t[n]?"yes"===t[n]:e.default,React.createElement(s.Flex,{style:C({},l),key:n},React.createElement(s.ToggleControl,{label:null==e?void 0:e.label,help:null==e?void 0:e.help,checked:r,onChange:e=>{const l=e?"yes":"no";a(C(C({},t),{},{[n]:l}))},__nextHasNoMarginBottom:!0,className:"wsx-custom-label"}))},f=(n,l)=>{const r=t[l]?t[l]:n.default;return React.createElement(s.FlexItem,{isBlock:!0,key:l,style:{marginTop:e?0:23}},React.createElement(u,{key:l,name:l,value:r,options:n.options,placeholder:n.placeholder,onMultiSelectChangeHandler:(e,n)=>{const l=C({},t);l[e]=[...n],a(C(C({},t),l))}}))};return React.createElement(React.Fragment,null,o.loading?React.createElement(s.Flex,{justify:"center"},React.createElement(s.Spinner,null)):React.createElement(s.__experimentalVStack,{spacing:8},Object.keys(l).map(n=>{return"_product_settings_tab"===n&&(r=l[n].attr,Object.keys(r).map(n=>{switch(r[n].type){case"radio":return((e,n)=>React.createElement(s.BaseControl,{key:n,__nextHasNoMarginBottom:!0},React.createElement(s.BaseControl.VisualLabel,null,e.label),React.createElement(s.RadioControl,{hideLabelFromVision:!0,__nextHasNoMarginBottom:!0,help:null==e?void 0:e.help,onChange:e=>{e.startsWith("pro_")?d(!0):a(C(C({},t),{},{[n]:e}))},options:Object.keys(null==e?void 0:e.options).map(t=>({label:null==e?void 0:e.options[t],value:t})),selected:_(n,e),className:"wsx-custom-label"})))(r[n],n);case"slider":return m(r[n],n,{marginTop:"-12px"});case"select":return p(r[n],n);case"visibility_section":return((a,n)=>React.createElement(s.Panel,{key:n,className:"wsx-custom-panel"},React.createElement(s.PanelBody,{title:a.label},React.createElement(s.__experimentalVStack,{spacing:5},React.createElement(s.__experimentalVStack,{spacing:3},Object.keys(a.attr).map(e=>"slider"===a.attr[e].type?m(a.attr[e],e):null)),React.createElement(s.Flex,{gap:4,align:"stretch",direction:e?"column":"row"},Object.keys(a.attr).map(e=>{switch(a.attr[e].type){case"select":return p(a.attr[e],e);case"multiselect":if("b2b_specific"===t._hide_for_b2b_role_n_user&&"_hide_for_roles"===e)return f(a.attr[e],e);if("user_specific"===t._hide_for_b2b_role_n_user&&"_hide_for_users"===e)return f(a.attr[e],e)}return null}))))))(r[n],n);default:return null}}));var r})),React.createElement("input",{type:"hidden",value:JSON.stringify(t),name:"wholesalex_product_settings"}),c&&React.createElement(x,{title:__("Unlock all of these Features with","wholesalex"),onClose:()=>d(!1)}))},B=new Map,N=(e,t)=>{const a=(e=>(B.has(e)||B.set(e,(0,r.createRoot)(e)),B.get(e)))(e);a.render(l().createElement(l().StrictMode,null,t))},D=e=>{const t={},a=window.prompt(woocommerce_admin_meta_boxes_variations.i18n_enter_a_value);null!==a&&(t.value=a,jQuery.ajax({url:woocommerce_admin_meta_boxes_variations.ajax_url,data:{action:"wholesalex_bulk_edit_variations",security:woocommerce_admin_meta_boxes_variations.bulk_edit_variations_nonce,product_id:woocommerce_admin_meta_boxes_variations.post_id,product_type:jQuery("#product-type").val(),bulk_action:e,data:t},type:"POST",success:()=>{location.reload()}}))};document.addEventListener("DOMContentLoaded",function(){var e,t,a;document.body.contains(document.getElementById("wsx_tab_data"))&&N(document.getElementById("wsx_tab_data"),l().createElement(P,null));let n=document.getElementsByClassName("wsx-single-product-settings-wrapper");n.length&&N(n[0],l().createElement(S,null)),jQuery("#woocommerce-product-data").on("woocommerce_variations_loaded",function(){n=document.getElementsByClassName("wsx-single-product-settings-wrapper"),Array.from(n).forEach(e=>{e.style.margin="24px 0"});const e=document.getElementsByClassName("variable_post_id");for(let t=1;t<n.length;t++)N(n[t],l().createElement(S,{id:e[t-1].value}))}),null!==(e=wholesalex_single_product)&&void 0!==e&&e.is_dokan_dashboard&&jQuery(".dokan-product-variation-wrapper").on("dokan_variations_loaded",function(){n=document.getElementsByClassName("wsx-single-product-settings-wrapper");for(let t=1;t<n.length;t++){var e;const a=null===(e=document.getElementsByName("variable_post_id[".concat(t-1,"]")))||void 0===e||null===(e=e[0])||void 0===e?void 0:e.value;N(n[t],l().createElement(S,{id:a}))}});const r=document.getElementsByClassName("wsx-bundle-product-wrapper");if(r.length>0&&N(r[0],l().createElement(S,{type:"yith"})),null!==(t=wholesalex_single_product)&&void 0!==t&&t.is_wcfm_dashboard){n=document.getElementsByClassName("_wholesalex_wcfm_single_product_settings"),n.length&&N(n[0],l().createElement(S,null)),n=document.getElementsByClassName("_wholesalex_wcfm_variable_product_settings");for(let e=0;e<n.length;e++){var o;const t=null===(o=document.getElementById("variations_id_".concat(e)))||void 0===o?void 0:o.value;N(n[e],l().createElement(S,{id:t,isWCFMVariation:!0}))}}null!==(a=wholesalex_product)&&void 0!==a&&null!==(a=a.roles)&&void 0!==a&&a.length&&jQuery("select.variation_actions").on("change",function(e){const t=jQuery(e.target).val();wholesalex_product.roles.forEach(e=>{const a="wholesalex_product_price_"+e.value+"_base",n="wholesalex_product_price_"+e.value+"_sale";t===a?D(a):t===n&&D(n)})})})})();
//# sourceMappingURL=whx_product.js.map