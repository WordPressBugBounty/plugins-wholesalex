"use strict";(self.webpackChunkwholesalex=self.webpackChunkwholesalex||[]).push([[263],{6263(e,t,n){function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t,n){return(t=function(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{default:()=>g});var r=n(1609),o=n(594),l=n(6427),c=n(9491);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const u=wholesalex_migration.fields,g=()=>{var e,t,n,i,a;const s=(0,c.useViewportMatch)("medium","<"),[g,p]=(0,r.useState)(null===(e=Object.keys(u))||void 0===e?void 0:e[0]),{dispatch:d}=(0,r.useContext)(o.M),[h,_]=(0,r.useState)(null===(t=wholesalex_migration)||void 0===t?void 0:t.migration_status),[b,y]=(0,r.useState)(null===(n=wholesalex_migration)||void 0===n?void 0:n.stats),w=async e=>new Promise(t=>setTimeout(t,e)),v=()=>{const e={type:"b2bking_migration_status",action:"migration",nonce:wholesalex_migration.nonce};wp.apiFetch({path:"/wholesalex/v1/migration",method:"POST",data:e}).then(e=>{null!=e&&e.is_migrating?(_(e=>m(m({},e),{},{b2bking_migration:"running"})),w(5e3).then(()=>{v()})):(_(e=>m(m({},e),{},{b2bking_migration:!1})),y(t=>m(m({},t),{},{b2bking_migration:e.migration_stats})),x(!1),d({type:"ADD_MESSAGE",payload:{id:Date.now().toString(),type:"success",message:"Migration Successful."}}))})},f=()=>{const e={type:"ws_migration_status",action:"migration",nonce:wholesalex_migration.nonce};wp.apiFetch({path:"/wholesalex/v1/migration",method:"POST",data:e}).then(e=>{null!=e&&e.is_migrating?(_(e=>m(m({},e),{},{wholesale_suite_migration:"running"})),w(5e3).then(()=>{f()})):(y(t=>m(m({},t),{},{wholesale_suite_migration:e.migration_stats})),_(e=>m(m({},e),{},{wholesale_suite_migration:!1})),k(!1),d({type:"ADD_MESSAGE",payload:{id:Date.now().toString(),type:"success",message:"Migration Successful."}}))})},[S,x]=(0,r.useState)(null===(i=wholesalex_migration)||void 0===i?void 0:i.allow_b2bking_migration),[E,k]=(0,r.useState)(null===(a=wholesalex_migration)||void 0===a?void 0:a.allow_wholesale_suite_migration),O=Object.keys(u||{}).map(e=>({value:e,label:u[e].label}));return React.createElement(React.Fragment,null,React.createElement("div",{className:"wsx-container"},React.createElement(l.Flex,{align:"start",direction:s?"column":"row",expanded:!0,gap:3},React.createElement(l.Card,{style:{borderRadius:4,width:s?"100%":"auto"}},React.createElement(l.MenuItemsChoice,{choices:O,value:g,onSelect:e=>p(e)})),(()=>{const e=u[g];return React.createElement(l.Card,{style:{width:"100%",borderRadius:"4px"}},React.createElement(l.CardHeader,null,React.createElement(l.__experimentalHeading,{level:3},null==e?void 0:e.label),(()=>{switch(g){case"b2bking_migration":return React.createElement(l.Button,{size:"compact",variant:"primary",disabled:!S,onClick:()=>(()=>{_(e=>m(m({},e),{},{b2bking_migration:"running"}));const e={type:"start_b2bking_migration",action:"migration",nonce:wholesalex_migration.nonce};wp.apiFetch({path:"/wholesalex/v1/migration",method:"POST",data:e}).then(e=>{e.status&&(d({type:"ADD_MESSAGE",payload:{id:Date.now().toString(),type:"success",message:"Migration Started"}}),v())})})(),style:{flexShrink:0},icon:"running"===h[g]&&React.createElement(l.Spinner,{style:{margin:0,width:14,height:14}}),iconPosition:"right"},"running"===(null==h?void 0:h.b2bking_migration)&&"Migrating..",!(null!=h&&h.b2bking_migration)&&S&&"Migrate Now",("complete"===(null==h?void 0:h.b2bking_migration)||!S)&&"Migrated");case"wholesale_suite_migration":return React.createElement(l.Button,{size:"compact",variant:"primary",disabled:!E,onClick:()=>(()=>{_(e=>m(m({},e),{},{wholesale_suite_migration:"running"}));const e={type:"start_ws_migration",action:"migration",nonce:wholesalex_migration.nonce};wp.apiFetch({path:"/wholesalex/v1/migration",method:"POST",data:e}).then(e=>{e.status&&(d({type:"ADD_MESSAGE",payload:{id:Date.now().toString(),type:"success",message:"Migration Started"}}),f())})})(),style:{flexShrink:0},icon:"running"===h[g]&&React.createElement(l.Spinner,{style:{margin:0,width:14,height:14}}),iconPosition:"right"},"running"===(null==h?void 0:h.wholesale_suite_migration)&&"Migrating..",!(null!=h&&h.wholesale_suite_migration)&&E&&"Migrate Now",("complete"===(null==h?void 0:h.wholesale_suite_migration)||!E)&&"Migrated")}})()),React.createElement(l.CardBody,null,React.createElement(l.Flex,{direction:"column",gap:5},e&&Object.keys(e.attr).map((t,n)=>{const i=100===(null==b?void 0:b[g][t]);return React.createElement(l.Flex,{key:"settings_field_content_".concat(n),justify:"start",align:"start",gap:3},React.createElement(l.FlexItem,{style:{flexShrink:0}},React.createElement(l.__experimentalText,{variant:i?"unmuted":"muted"},React.createElement(l.Icon,{icon:"yes-alt",size:28,style:{marginTop:3}}))),React.createElement(l.Flex,{direction:"column",gap:1},React.createElement(l.__experimentalText,{size:16,weight:"500",isBlock:!0},e.attr[t].label),React.createElement(l.__experimentalText,{variant:"muted"},e.attr[t].desc)))}))))})())))}}}]);
//# sourceMappingURL=263.js.map?ver=0bbcb7972cf5074cc814