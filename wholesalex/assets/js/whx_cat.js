(()=>{"use strict";var e={5338(e,t,n){var l=n(5795);t.createRoot=l.createRoot,l.hydrateRoot},5795(e){e.exports=window.ReactDOM}},t={};function n(l){var r=t[l];if(void 0!==r)return r.exports;var a=t[l]={exports:{}};return e[l](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var l in t)n.o(t,l)&&!n.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const l=window.React;var r=n.n(l),a=n(5338);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t,n){return(t=function(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=window.wp.i18n,s=window.wp.element,u=window.wp.components,d=e=>{let{name:t,value:n,label:r,options:a,placeholder:o,onMultiSelectChangeHandler:i,isDisable:c,isAjax:s,ajaxAction:d,ajaxSearch:p,dependsValue:m}=e;const _=(0,l.useRef)(null),v=Boolean(s&&d),f=Array.isArray(n)?n:[],y=Array.isArray(a)?a:[],g=e=>{const t=document.createElement("textarea");return t.innerHTML=null!=e?e:"",t.value},[h,x]=(0,l.useState)(f),[b,w]=(0,l.useState)(y);(0,l.useEffect)(()=>{x(Array.isArray(n)?n:[])},[n]),(0,l.useEffect)(()=>{w(Array.isArray(a)?a:[])},[a]);const[O,E]=(0,l.useState)(f),[j,S]=(0,l.useState)([]),[R,k]=(0,l.useState)(""),[C,P]=(0,l.useState)(!1),[B,D]=(0,l.useState)(""),[H,A]=(0,l.useState)(y);(0,l.useEffect)(()=>{E(Array.isArray(n)?n:[])},[n]),(0,l.useEffect)(()=>{A(Array.isArray(a)?a:[])},[a]);const M=()=>{let e=[];O.length>0&&(e=O.map(e=>e.value));const t=H.filter(t=>{const{name:n,value:l}=t;return(n||"").toLowerCase().includes(R.toLowerCase())&&-1===e.indexOf(l)});S(t)};(0,l.useEffect)(()=>{if(!v)return;_.current=new AbortController;const{signal:e}=_.current;p||(async e=>{P(!0);const t={type:"get",action:"dynamic_rule_action",nonce:wholesalex.nonce,ajax_action:d};m&&(t.depends=m);try{const l=await wp.apiFetch({path:"/wholesalex/v1/dynamic_rule_action",method:"POST",data:t,signal:e});if(l.status){var n;let e=[];O.length>0&&(e=O.map(e=>e.value));const t=null==l||null===(n=l.data)||void 0===n?void 0:n.filter(t=>{const{value:n}=t;return-1===e.indexOf(n)});t.sort((e,t)=>e.name.length-t.name.length),A(l.data),S(t)}}catch(e){}finally{P(!1)}})(e)},[]),(0,l.useEffect)(()=>{if(v&&p){_.current=new AbortController;const{signal:e}=_.current;return R.length>=2&&(async e=>{P(!0);const t={type:"get",action:"dynamic_rule_action",nonce:wholesalex.nonce,query:R,ajax_action:d};try{const l=await wp.apiFetch({path:"/wholesalex/v1/dynamic_rule_action",method:"POST",data:t,signal:e});if(l.status){var n;let e=[];O.length>0&&(e=O.map(e=>e.value));const t=null==l||null===(n=l.data)||void 0===n?void 0:n.filter(t=>{const{value:n}=t;return-1===e.indexOf(n)});t.sort((e,t)=>e.name.length-t.name.length),A(e=>{const t=new Set(e.map(e=>e.value)),n=l.data.filter(e=>!t.has(e.value));return[...e,...n]}),S(t)}}catch(e){}finally{P(!1)}})(e),()=>{_.current&&_.current.abort("Duplicate")}}},[R]),(0,l.useEffect)(()=>{if(v)if(p){if(B.length>1){const e=setTimeout(()=>k(B),500);return()=>clearTimeout(e)}}else k(B),M()},[B]),(0,l.useEffect)(()=>{v&&!p&&M()},[H]);const V=v,F=V?O:h,T=V?j:b,N=V?o||t:r||o||t;let L=o;return!V&&h.length>0&&(L=""),React.createElement(u.FormTokenField,{__nextHasNoMarginBottom:!0,__experimentalAutoSelectFirstMatch:!0,__experimentalExpandOnFocus:!0,__next40pxDefaultSize:!0,__experimentalShowHowTo:!1,disabled:Boolean(c),id:V?void 0:t,value:F.map(e=>g(null==e?void 0:e.name)),suggestions:T.map(e=>g(null==e?void 0:e.name)),placeholder:L,label:null!=r?r:"","aria-label":N,isLoading:V?C:void 0,onChange:V?e=>{const n=(Array.isArray(e)?e:[]).map(e=>{const t=(e=>{const t=(null!=e?e:"").toString().toLowerCase();return H.find(e=>g((null==e?void 0:e.name)||(null==e?void 0:e.userName)||"").toString().toLowerCase()===t)||j.find(e=>g((null==e?void 0:e.name)||(null==e?void 0:e.userName)||"").toString().toLowerCase()===t)})(e);if(t)return t;return O.find(t=>(null==t?void 0:t.value)&&t.value.toString()===e.toString())||{name:e,value:e,permalink:""}});E(n),null==i||i(t,n);const l=n.map(e=>e.value),r=(H.length>0?H:j).filter(e=>-1===l.indexOf(e.value));S(r)}:e=>{const n=(e||[]).map(e=>y.find(t=>{var n;return g(null!==(n=null==t?void 0:t.name)&&void 0!==n?n:"")===e||(null==t?void 0:t.name)===e})||{name:e,value:e});x(n),null==i||i(t,n)},onInputChange:V?e=>{D(e)}:void 0,className:"wsx-multiselect-component"})};function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)({}).hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},p.apply(null,arguments)}const m=window.wp.primitives,_=window.ReactJSXRuntime;var v=(0,_.jsx)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,_.jsx)(m.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})}),f=(0,_.jsx)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,_.jsx)(m.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})});const y=window.wp.compose;function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,l)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const x=e=>{var t;let{fields:n,tier:r,setTier:a,tierName:o,index:i,setPopupStatus:s,src:m,isProfile:_=!1,isSmallGap:g=!1,style:x}=e;const b=Object.keys(n).length,w=null===(t=wholesalex)||void 0===t?void 0:t.is_rtl_support,O=(0,y.useViewportMatch)("medium","<"),E=(e,t,n)=>{const l=r[o]&&r[o].tiers&&r[o].tiers[i]&&r[o].tiers[i][n]?r[o].tiers[i][n]:t.default;return React.createElement(u.BaseControl,{__nextHasNoMarginBottom:!0,key:e},(O||0===i)&&t.label&&React.createElement(u.BaseControl.VisualLabel,null,t.label),React.createElement(u.SelectControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,name:"".concat(n,"_").concat(i),value:l,onChange:e=>{if(null!=e&&e.startsWith("pro_")&&s)s(!0);else{const t=r[o]?h({},r[o]):{tiers:[]},l=t.tiers?[...t.tiers]:[],c=l[i]?h({},l[i]):{};c[n]=e,l[i]=c,t.tiers=l,a(h(h({},r),{},{[o]:t}))}},options:(c=t.options,Object.keys(c).map(e=>({value:e,label:c[e]})))}));var c},j=e=>{if(!e)return!0;const t=r[o]&&r[o].tiers&&r[o].tiers[i]?r[o].tiers[i]:{};let n=!0;return e.forEach(e=>{t[e.key]!==e.value&&(n=!1)}),n},S=(e,t,n)=>{const l=r[o]&&r[o].tiers&&r[o].tiers[i]&&r[o].tiers[i][n]?r[o].tiers[i][n]:t.default;return React.createElement(d,{key:e,name:n,value:l,options:t.options,placeholder:t.placeholder,label:O||0===i?t.label:"",onMultiSelectChangeHandler:(e,t)=>{const n=r[o]?h({},r[o]):{tiers:[]},l=n.tiers?[...n.tiers]:[],c=l[i]?h({},l[i]):{};c[e]=[...t],l[i]=c,n.tiers=l,a(h(h({},r),{},{[o]:n}))},isAjax:null==t?void 0:t.is_ajax,ajaxAction:null==t?void 0:t.ajax_action,ajaxSearch:null==t?void 0:t.ajax_search})},R=O?"1fr":_?"1.5fr repeat(2, minmax(144px, 0.8fr)) 2.5fr 40px":"repeat(".concat(b,", 1fr) 40px");return React.createElement(l.Fragment,{key:"wsx-tier-fields-".concat(o,"-").concat(i)},React.createElement(u.__experimentalGrid,{align:"end",style:h({},x),gap:g?3:6,templateColumns:R},Object.keys(n).map((e,t)=>{switch(n[e].type){case"text":case"number":return((e,t,n)=>{const l=r[o]&&r[o].tiers&&r[o].tiers[i]&&r[o].tiers[i][n]?r[o].tiers[i][n]:t.default,c={__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,id:"".concat(n,"_").concat(i),value:null!=l?l:"",placeholder:t.placeholder,onChange:e=>{let l="number"===t.type?(e=>{const t="".concat(null!=e?e:"").replace(/[^\d.]/g,"");if(""===t)return"";const[n,...l]=t.split("."),r=""===n?"0":n,a=l.length>0?"".concat(r,".").concat(l.join("")):r;return""===a?"":Number(a)})(e):e;"number"===t.type&&""!==l&&l<0&&(l=1);const c=r[o]?h({},r[o]):{tiers:[]},s=c.tiers?[...c.tiers]:[],u=s[i]?h({},s[i]):{};u[n]=l,s[i]=u,c.tiers=s,a(h(h({},r),{},{[o]:c}))}},s="number"===t.type?u.__experimentalNumberControl:u.TextControl;return React.createElement(u.BaseControl,{__nextHasNoMarginBottom:!0,key:e},(O||0===i)&&t.label&&React.createElement(u.BaseControl.VisualLabel,null,t.label),React.createElement(s,p({},c,"number"===t.type&&{spinControls:"custom",min:"0"})))})("tier_field_".concat(t),n[e],e);case"select":return E("tier_field_".concat(t),n[e],e);case"multiselect":return j(n[e].depends_on)&&S("tier_field_".concat(t),n[e],e);case"filter":return React.createElement(u.Flex,{align:"end",key:"tier_field_".concat(t)},n[e]&&Object.keys(n[e]).map((t,l)=>{var a,c,s,d;const p=n[e][t],m="tier_field_".concat(l),_=null!==(a=null===(c=r[o])||void 0===c||null===(c=c.tiers)||void 0===c||null===(c=c[i])||void 0===c?void 0:c[t])&&void 0!==a?a:p.default,v=null==_||null===(s=_.endsWith)||void 0===s?void 0:s.call(_,"_in_list"),f={select:()=>E(m,p,t),multiselect:()=>j(p.depends_on)?S(m,p,t):null},y=null===(d=f[p.type])||void 0===d?void 0:d.call(f);return y?React.createElement(u.FlexItem,{key:m,isBlock:"select"!==p.type||!v},y):null}).filter(Boolean));default:return null}}),React.createElement(u.__experimentalView,{style:{marginRight:w?"auto":void 0,marginLeft:w?void 0:"auto",padding:2}},React.createElement(u.Button,{key:"wsx-tier-field-delete-".concat(o,"_").concat(i),__next40pxDefaultSize:!0,onClick:()=>{const e=h({},r);let t=[...e[o].tiers];if(1===t.length)return e[o].tiers[0]._conditions_for="",e[o].tiers[0]._conditions_operator="",e[o].tiers[0]._conditions_value="",e[o].tiers[0]._discount_type="",e[o].tiers[0]._min_quantity="",e[o].tiers[0]._discount_name="",e[o].tiers[0]._discount_amount="",e[o].tiers[0]._product_filter="",e[o].tiers=t,void a(e);t=t.filter((e,t)=>i!==t),e[o].tiers=t,a(e)},icon:v,variant:"secondary",label:(0,c.__)("Delete","wholesalex"),isDestructive:!0}))),i===(r&&r[o]&&r[o].tiers&&0!==r[o].tiers.length?r[o].tiers.length-1:0)&&("quantity_based"===o||"conditions"===o)&&React.createElement(u.__experimentalView,{style:{padding:2,marginTop:"12px"}},React.createElement(u.Button,{icon:f,variant:"primary",onClick:()=>{const e=h({},r);e[o]||(e[o]={tiers:[]});const t=[...e[o].tiers];t.push({_id:Date.now().toString(),src:m||"dynamic_rule"}),e[o].tiers=t,a(e)}},(0,c.__)("Add New Condition","wholesalex"))))};var b=(0,_.jsx)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,_.jsx)(m.Path,{d:"M3.445 16.505a.75.75 0 001.06.05l5.005-4.55 4.024 3.521 4.716-4.715V14h1.5V8.25H14v1.5h3.19l-3.724 3.723L9.49 9.995l-5.995 5.45a.75.75 0 00-.05 1.06z"})});const w=e=>{let{UpgradeUrl:t="",addonCount:n="",title:l=(0,c.__)("Unlock","wholesalex"),onClose:r}=e;var a;return""===t&&(t=null===(a=wholesalex)||void 0===a?void 0:a.pro_link),React.createElement(u.Modal,{className:"wsx-upgrade-modal",onRequestClose:r},React.createElement(u.__experimentalVStack,{align:"center",spacing:5},React.createElement("img",{style:{maxWidth:"166px",maxHeight:"166px"},src:wholesalex.url+"/assets/img/unlock.svg",alt:"Unlock Icon"}),React.createElement(u.__experimentalVStack,{align:"center",spacing:1},React.createElement(u.__experimentalHStack,{justify:"center"},React.createElement(u.__experimentalText,{size:"18",weight:"500"},l),n&&React.createElement(u.__experimentalText,{size:"18",weight:"500"},n,"+"," ",(0,c.__)("Addons with","wholesalex"))),React.createElement(u.__experimentalHStack,{justify:"center"},React.createElement(u.__experimentalText,{size:"18",weight:"500"},(0,c.__)("WholesaleX","wholesalex")),React.createElement(u.__experimentalText,{size:"18",weight:"600",color:"#0C54FC"},(0,c.__)("Pro","wholesalex")))),React.createElement(u.Button,{href:"https://getwholesalex.com/pricing/?utm_source=wholesalex-menu&utm_medium=email-unlock_addon-upgrade_to_pro&utm_campaign=wholesalex-DB",variant:"primary",icon:b,style:{width:"100%",justifyContent:"center"}},(0,c.__)("Upgrade to Pro","wholesalex"))))};var O=(0,_.jsx)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,_.jsx)(m.Path,{d:"m14.5 6.5-1 1 3.7 3.7H4v1.6h13.2l-3.7 3.7 1 1 5.6-5.5z"})});function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,l)}return n}const j=e=>{var t,n;let{fieldData:l,tierName:r,lockStatus:a,initialTier:o,tier:c,setTier:s,setPopUpStatus:d,onAddTier:p}=e;const m=a&&"button"===(null==l||null===(t=l._tiers)||void 0===t||null===(t=t.upgrade_pro)||void 0===t?void 0:t.type),_=!a&&"button"===(null==l||null===(n=l._tiers)||void 0===n||null===(n=n.add)||void 0===n?void 0:n.type);if(!m&&!_)return null;const v=m?l._tiers.upgrade_pro:l._tiers.add;return React.createElement(u.Flex,{justify:"start",style:{marginTop:"12px"}},React.createElement(u.Button,{variant:"secondary",icon:m?O:f,iconPosition:m?"right":"left",onClick:e=>{if(e.preventDefault(),m)null==d||d(!0);else if("function"!=typeof p){if(c&&s){const e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},c);e[r]||(e[r]={tiers:[]}),e[r].tiers=[...e[r].tiers||[],o||{_id:Date.now().toString()}],s(e)}}else p(r)}},null==v?void 0:v.label))};function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,l)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const k=()=>({_id:Date.now().toString(),_discount_type:"",_discount_amount:"",_min_quantity:"",src:"category"}),C=()=>{const[e,t]=(0,s.useState)({loading:!0,currentWindow:"new",index:-1,loadingOnSave:!1}),n={_settings_category_visibility:!0},l=(0,y.useViewportMatch)("wide","<"),r=(0,y.useViewportMatch)("medium","<"),a=(0,y.useViewportMatch)("small","<"),[o,i]=(0,s.useState)({}),[p,m]=(0,s.useState)({}),[_,v]=(0,s.useState)({}),[f,g]=(0,s.useState)(!1),h=(0,s.useMemo)(()=>{var e,t;return null!==(e=null===(t=wholesalex)||void 0===t?void 0:t.is_pro_activated)&&void 0!==e&&e},[]);(0,s.useEffect)(()=>{(()=>{var e;const n=document.querySelector('input[name="tag_ID"]'),l=null!==(e=null==n?void 0:n.value)&&void 0!==e?e:"";i(wholesalex_category.fields);const r=Object.keys(wholesalex_category.fields._b2b_tiers.attr).reduce((e,t)=>(e[t]={_base_price:"",_sale_price:"",tiers:[k()]},e),{});wholesalex_category.discounts[l]||(wholesalex_category.discounts[l]={}),v(R(R({},r),wholesalex_category.discounts[l])),wholesalex_category.visibility_settings[l]&&m(wholesalex_category.visibility_settings[l]),t(e=>R(R({},e),{},{loading:!1}))})()},[]);const b=(0,s.useCallback)((e,t)=>{m(n=>R(R({},n),{},{[e]:t}))},[]),O=(0,s.useCallback)(e=>{v(t=>R(R({},t),{},{[e]:R(R({},t[e]),{},{tiers:[...t[e].tiers,k()]})}))},[]),E=(0,s.useCallback)(e=>Object.entries(e).map(e=>{let[t,n]=e;return{value:t,label:n}}),[]),S=(0,s.useCallback)((e,t)=>{var n,l;const r=null!==(n=null!==(l=p[t])&&void 0!==l?l:e.default)&&void 0!==n?n:"",a=r.endsWith("_specific");return React.createElement(u.FlexItem,{isBlock:!a,key:t},React.createElement(u.SelectControl,{key:t,label:e.label,value:r,options:E(e.options),onChange:e=>b(t,e),help:e.help,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}))},[p,E,b]),C=(0,s.useCallback)((e,t)=>{const n=p[t],l=void 0!==n?"yes"===n:Boolean(e.default);return React.createElement(u.Flex,null,React.createElement(u.ToggleControl,{key:t,__nextHasNoMarginBottom:!0,label:e.label,checked:l,onChange:e=>b(t,e?"yes":"no"),help:null==e?void 0:e.help}))},[p,b]),P=(0,s.useCallback)((e,t)=>{const n=p[t],l=void 0!==n?"yes"===n:Boolean(e.default);return React.createElement(u.Flex,null,React.createElement(u.ToggleControl,{key:t,__nextHasNoMarginBottom:!0,label:e.label,checked:l,onChange:e=>b(t,e?"yes":"no")}))},[p,b]),B=(0,s.useCallback)((e,t)=>{var n;const l=null!==(n=p[t])&&void 0!==n?n:e.default;return React.createElement(u.FlexItem,{isBlock:!0},React.createElement(d,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,key:t,name:t,value:l,options:e.options,placeholder:e.placeholder,onMultiSelectChangeHandler:(e,t)=>m(n=>R(R({},n),{},{[e]:[...t]}))}))},[p]),D=(0,s.useCallback)((e,t)=>{var o;const i=null!==(o=n[t])&&void 0!==o&&o,c=l?"column":r?"row":a?"column":"row",s=l?"stretch":r?"end":a?"stretch":"end";return React.createElement(u.Panel,{key:t},React.createElement(u.PanelBody,{title:e.label,initialOpen:i},React.createElement(u.Flex,{direction:"column",gap:6},React.createElement(u.Flex,{direction:"column",gap:3},Object.entries(e.attr).map(e=>{let[t,n]=e;return"slider"===n.type?P(n,t):null})),React.createElement(u.Flex,{direction:c,gap:3,align:s},Object.entries(e.attr).map(e=>{let[t,n]=e;switch(n.type){case"select":return S(n,t);case"multiselect":return"b2b_specific"===(null==p?void 0:p._hide_for_b2b_role_n_user)&&"_hide_for_roles"===t||"user_specific"===(null==p?void 0:p._hide_for_b2b_role_n_user)&&"_hide_for_users"===t?B(n,t):null;default:return null}})))))},[n,p,C,P,S,B]),H=(0,s.useCallback)((e,t,n)=>{var l,r;const a=e._tiers.data,o=null!==(l=null===(r=_[t])||void 0===r?void 0:r.tiers)&&void 0!==l?l:[];return React.createElement(u.Flex,{direction:"column"},o.map((e,n)=>React.createElement(x,{key:"wholesalex_".concat(t,"_tier_").concat(n),fields:a,tier:_,setTier:v,index:n,tierName:t,deleteSpaceLeft:"auto",isSmallGap:!0})),React.createElement(j,{fieldData:e,tierName:t,lockStatus:n,setPopUpStatus:g,onAddTier:()=>O(t)}))},[_,O,g]),A=(0,s.useCallback)((e,t)=>{var l,r,a,o,i;const c=e.is_pro&&null!==(l=null===(r=e.pro_data)||void 0===r?void 0:r.value)&&void 0!==l?l:1/0,s=(null!==(a=null===(o=_[t])||void 0===o||null===(o=o.tiers)||void 0===o?void 0:o.length)&&void 0!==a?a:0)>=c&&!h,d=null!==(i=n[t])&&void 0!==i&&i;return React.createElement(u.Panel,{key:"wholesalex_".concat(t)},React.createElement(u.PanelBody,{title:e.label,initialOpen:d},e.attr&&Object.entries(e.attr).map(e=>{let[,n]=e;return"tier"===n.type?H(n,t,s):null})))},[_,n,h,H]),M=(0,s.useCallback)((e,t)=>{switch(e.type){case"visibility_section":return D(e,t);case"tiers":return A(e,t);default:return null}},[D,A]);return e.loading?React.createElement(u.Spinner,null):React.createElement(u.Card,{size:"xSmall"},React.createElement(u.CardBody,null,React.createElement(u.Flex,{direction:"column",gap:8},Object.entries(o).map(e=>{let[t,n]=e;return Object.keys(n.attr).length>0&&React.createElement(u.Flex,{direction:"column",gap:3,key:t},React.createElement(u.__experimentalHeading,{level:3},n.label),React.createElement(u.Flex,{direction:"column",gap:4},Object.entries(n.attr).map(e=>{let[t,n]=e;return M(n,t)})))}),React.createElement("input",{type:"hidden",value:JSON.stringify(_),name:"wholesalex_category_tiers"}),React.createElement("input",{type:"hidden",value:JSON.stringify(p),name:"wholesalex_category_visibility_settings"}),f&&React.createElement(w,{title:(0,c.__)("Unlock all of these Features with","wholesalex"),onClose:()=>g(!1)}))))};document.addEventListener("DOMContentLoaded",function(){document.body.contains(document.getElementById("_wholesalex_edit_category"))&&(0,a.createRoot)(document.getElementById("_wholesalex_edit_category")).render(r().createElement(r().StrictMode,null,r().createElement(C,null)))})})();
//# sourceMappingURL=whx_cat.js.map